---
import Layout from "../layouts/Layout.astro";
const allPosts = Object.values(
  import.meta.glob("./posts/*.md", { eager: true })
);

// Sort posts by date (newest first)
const sortedPosts = allPosts.sort((a: any, b: any) => {
  const dateA = new Date(a.frontmatter.pubDate);
  const dateB = new Date(b.frontmatter.pubDate);
  return dateB.getTime() - dateA.getTime();
});
---

<Layout>
  <main class="max-w-5xl mx-auto px-6 py-16">
    <!-- Articles List -->
    <section class="space-y-6">
      {
        sortedPosts.map((post: any) => (
          <article>
            <a
              href={post.url}
              class="group grid grid-cols-1 md:grid-cols-12 gap-4 md:gap-12 items-start py-4 hover:opacity-70 transition-all duration-200 no-underline"
            >
              <h2 class="md:col-span-5 text-xl md:text-lg font-semibold text-foreground group-hover:text-foreground">
                {post.frontmatter.title}
              </h2>
              <p class="md:col-span-5 text-base text-muted-foreground leading-relaxed">
                {post.frontmatter.description}
              </p>
              <div class="md:col-span-2 text-base text-muted-foreground md:text-right font-medium">
                {new Date(post.frontmatter.pubDate).getFullYear()}
              </div>
            </a>
          </article>
        ))
      }
    </section>

    <!-- Footer Label -->
    <footer class="mt-24 text-center">
      <p class="text-lg text-muted-foreground font-medium">Articles</p>
    </footer>
  </main>
</Layout>
